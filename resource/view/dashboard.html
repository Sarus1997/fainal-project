<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Impact Bootstrap Template - Blog</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300&display=swap" rel="stylesheet">
    <link href="../../assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/sidebars.css" rel="stylesheet">
    <link href="../css/header.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">
    <link href="../../assets/css/chart_admin.css" rel="stylesheet">

    <!-- Favicons -->
    <link href="../../assets/img/favicon.png" rel="icon">
    <link href="../../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,600;1,700&family=Montserrat:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Raleway:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="../../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../../assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="../../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="../../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- table CSS Files -->
    <link href="../../assets/css/dashboard_td.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="../../assets/css/main.css" rel="stylesheet">

    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/locales/de_DE.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/germanyLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/fonts/notosans-sc.js"></script>

</head>

<body>
    <!-- ======= navbar ======= -->
    <script src="../../components/navbar-1.js"></script>
    <navbar_1-components></navbar_1-components>

    <!-- ======= hero ======= -->
    <script src="../../components/hero-1.js"></script>
    <hero_1-components></hero_1-components>

    <main id="main">

        <!-- ======= Blog Section ======= -->
        <section id="blog" class="blog mx-auto">
            <div class="container">
                <div class="row">
                    <div class=" col-lg-12">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารโดยเฉลี่ยในภาพรวม
                            </div>
                            <div class="card-body">
                                <table id="rankingTable6" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>ด้านคุณภาพ</th>
                                            <th>ด้านราคา</th>
                                            <th>ด้านเซอร์วิส</th>
                                            <th>ด้านการแต่งกาย</th>
                                            <th>ด้านความสะอาด</th>
                                            <th>ด้านความสุภาพ</th>
                                            <th>ผลการประเมินโดยรวม</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทคุณภาพ
                            </div>
                            <div class="card-body">
                                <table id="rankingTable" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>

                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทคราคา
                            </div>
                            <div class="card-body">
                                <table id="rankingTable1" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทเซอร์วิส
                            </div>
                            <div class="card-body">
                                <table id="rankingTable2" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทการแต่งกาย
                            </div>
                            <div class="card-body">
                                <table id="rankingTable3" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทความสะอาด
                            </div>
                            <div class="card-body">
                                <table id="rankingTable4" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-bar me-1"></i>
                                ตารางแสดงลำดับคะแนนร้านอาหารประเภทความสุภาพ
                            </div>
                            <div class="card-body">
                                <table id="rankingTable5" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                        <tr>
                                            <th>ลำดับ</th>
                                            <th>ชื่อร้าน</th>
                                            <th>คะแนน</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- End Blog Section -->

    </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <script src="../../components/footer.js"></script>
    <footer-components></footer-components>
    <!-- ======= End Footer ======= -->

    <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <div id="preloader"></div>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="../../js/Chart_data.js"></script>
    <script src="../../js/scripts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
    <script src="../../assets/demo/chart-area-demo.js"></script>
    <script src="../../assets/demo/chart-bar-demo.js"></script>
    <script src="../../assets/demo/chart-pie-demo.js"></script>
    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Vendor JS Files -->
    <script src="../../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/vendor/aos/aos.js"></script>
    <script src="../../assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="../../assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="../../assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="../../assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="../../assets/vendor/php-email-form/validate.js"></script>

    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Template Main JS File -->
    <script src="../../assets/js/main.js"></script>

</body>

<script>
    window.onload = function () {
        if (localStorage.getItem("role") == "admin") {
            console.log("admin")
        } else if (localStorage.getItem("role") == "restaurant") {
            window.location.href = "./charts.html";
        } else if (localStorage.getItem("role") == "manager") {
            window.location.href = "./center.html";
        } else {
            localStorage.clear();
            window.location.href = "../../../../fainal-project/login.html";
        }
        setProfile();
        loadRanking();
    }

    function setProfile() {
        username = localStorage.getItem("username");
        name = localStorage.getItem("name").toUpperCase();
        document.getElementById("profileImg").src = `https://ui-avatars.com/api/?name=${username}&background=random&rounded=true&size=50`;
        document.getElementById("profileName").innerHTML = `${name}&nbsp;`;
    }

    function logout() {
        localStorage.clear();
        window.location.reload();
    }

    function loadRanking() {
        $.ajax({
            url: "http://localhost:3000/ranking/id_quality",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_quality
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/id_price",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable1').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_price
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/id_serve",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable2').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_serve
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/id_dress",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable3').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_dress
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/id_cleanliness",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable4').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_cleanliness
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/id_polite",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable5').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_polite
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
        $.ajax({
            url: "http://localhost:3000/ranking/all",
            type: "GET",
            dataType: "json",
            success: function (data) {
                console.log(data);
                var table = $('#rankingTable6').DataTable();
                table.clear().draw();
                for (var i = 0; i < data.length; i++) {
                    table.row.add([
                        i + 1,
                        data[i]._id,
                        data[i].id_quality,
                        data[i].id_price,
                        data[i].id_serve,
                        data[i].id_dress,
                        data[i].id_cleanliness,
                        data[i].id_polite,
                        data[i].total + " / 100%"
                    ]).draw(false);
                }
            },
            error: function (xhr, status, error) {
                console.log(xhr);
            }
        });
    }

</script>

</html>